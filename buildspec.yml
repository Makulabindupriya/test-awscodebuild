version: 0.2

phases:
  pre_build:
    commands:
      - echo Logging in to Amazon ECR...
      - docker login -u AWS -p yJwYXlsb2FkIjoiekVSdVYzOFVwMGF6L0VxQkZ0QkUyWWRiWUNoTStQdEYvVUcwSTNSYW1rRXN6L3pxdXFxVFRCVFI4dllqMGtoNU1IMGJyeDFySlVLYkxsaHEvTHZuNTJ6ajM1OTFwQXlUSFhxZEhzUFBPdUhMa1JxbXNmeEp3MUFwa3dUNE5VUnloZTJQV0J2Y0RzMUpwZXJreGRZUG4raHdHWHVCTDhkU3E4VGZxUjZYZ3lId0J1V2t5Nkx5OGRuKzBhRHJJYXVlVzUrT29lSDlQTzd2UE8yKzJTQ0NyRC9GZkJycGltbTFaYkUzYjZMZmlFbTlvWi9FUHRNSC9yVHY4bGxTODVsUzdwZ0JaWGRSNWxOQmI0WWF2eUtWbU9vNUR2QTN3MG51RWY5b29mRVB2MnZDSjJsbllLNUxMMTVWSkFUQlpKdm9NUTNTKy8vWFRPakpKUjlSM3hLL0ptWVUvSy82Z1E5VWs0Ri9FYjhDVVBvMm5VQVNsOHBwUXNUQjZ3clBKdlZMQUlwYWd2V3RCUDhUVGg4S0NmZFRwbHZwR2VpbVFjRy80YjdGd1M2QmV3NTVOQmZESjBhcS9zUm9udGhHZ2xmZXVGaUpBb05oK0QvN2lDekxTTUIyRy80Z2N4aVo2TGI5YlZMOFJVQk9HQnNkdlVOSXFrMXpVTTloM0tKTEZjbkM2aXBBZXZxaENLcU40QWZEenBzSjZYOGdGZU9tT0k2NVRQdmx4L3hUWHVPVjVlT3lKRXlValRvTVFjaUlnNSsvZjBKaVFya0hBM1UzRnVkeTBBbVB3MnZJZCtrQndtSHFoMmM4aFZjVHNFb3c2VWc2c2VjdWRxU3JIQlRGRURISXVxc25uU3g0dGlvMS9BVlNINjZCZGp4SmtlSWJjQnpBUTlvYXJKUDg0dENlYTNaTWxtTEtKM2ZhRTQ0cGFFYlJjSFRVTy83R1k5c3BwL3hMRVRDakdXYnQ5VlpvZXNnTjdIaU5hYjB6b0h0cm9Yc3pwdllTeTBUT1ZEc0NHK211WkFBWHZWSFVwVjJCTzZteXFBaklJbkJDUDhBaUh4ZGhuSDdOeXl0a0Q5cmFuU1ZXQUk3ZUlVOVpWckMrYzN0MDkxdmdJamxjaDBJU2JMVDVjaTNFdWRvdjhBNjJhdWVzMTg4QkJ4MG15NGJIQmZ1cGJPd2ZCaDg5M2dtaWVZamVWYXAxMHd4YXA4RHBqWUNJN05SQk5xV21sV1hxMHQ1REN5K1g5S2Y1ckxBaTU2SFRmYWtVZTdPRUJreFNwQmFrNTJBR2ZKOU5oL3hWM09WV3l0OXBWRFJxNG1FZ0Q4UFp4cHpWT01ieTdwckV5ZVgwelFkUUFyaWNwWE92bXB1QWhsZjJIeUErWk1keTRSaStLK01hbmpUMjJsYU82OG5VdkxvWVFlV0lGdmVQUUpXTTlyNmluaUk0WWFkN1RDUUIvR0hBUHdnZ0Mxd3RpZWlZVlduL09vcWhYajgzY2F0OWY3U1AzY0syVkp0NGltb2U4ZGh3ZHBxUHhMdGJ4WGRiS3VBWlAxcmc5RXVncEVsL2ZqcHMwNGJ4algzZ1NCR241NS9aOEZBZGY3UXljbjNRWEFvYkhZdm4wN2ZKK2lFUEE4c2I2clpwZU1CK0J1WHRmWVBMRUJFVllJbXJ0YTBlemNWT1I4VkdoYkNySHMxREMzRnJDWkRSNm1OZlBTeDhXaGxkbnJ4a3pRa0tXenB4elVqdkgyWXk0NE1XZFh3Y3FXNGh2eUhHYlpvaWZ0cG1PVkZVa3RhOUpoc2JwWFFWRzRsT0s2aklWWTVTMHFndUNBekpOU1pvaXd3NnFzV1U5WGt5SUlsd01aaTFWUTRYY0ZsVU8zOWZtWkVUVDhlWkNSVDVCeU5BQjlmQmM4QzJWeS9TeFRHdjZSLzZ0RG9GQTFEVHpCbW1QQTFZeExkekpReWZLUkQybDFiOGN6SG5RVWt6UzBwMVVkTG9EcytZS2g3K0o3RWZIQ0xRRzFTM0wyUDJqL1FBOTF2S1N4V0ZZSnlXK0tYdTlna1ZsbTBOeVRiRUtzbjhpczh6NDYwLzNqcXdCVGFHRDJJTWpqUjZoRzRTU1JhUHBrVHAwSVFXOXQ5Z2pKQXplT2xUT2lhdGxQd2ZtdnFmeCt4T2RTZTYrQksyT2Rzc3plNnArT1hzSUE9PSIsImRhdGFrZXkiOiJBUUVCQUhqNmxjNFhJSncvN2xuMEhjMDBETWVrNkdFeEhDYlk0UklwVE1DSTU4SW5Vd0FBQUg0d2ZBWUpLb1pJaHZjTkFRY0dvRzh3YlFJQkFEQm9CZ2txaGtpRzl3MEJCd0V3SGdZSllJWklBV1VEQkFFdU1CRUVES0tReGp6L2k0alVjVHgyd2dJQkVJQTc1WmZLWlNPaEJONnFSUXZSQm9GTjlYejVYL3BicWNUanpvRHA5RnREd2R1TGhNKy9mTjlvR09jQnk5bmN0N2hlS2w2VEw3K0p1UkQxMm9NPSIsInZlcnNpb24iOiIyIiwidHlwZSI6IkRBVEFfS0VZIiwiZXhwaXJhdGlvbiI6MTY0OTg5NjA2OH0= https://840532010037.dkr.ecr.us-west-2.amazonaws.com
  build:
    commands:
      - echo Build started on `date`
      - echo Building the Docker image...          
      - docker build -t sonarqube .
      - docker tag docker tag sonarqube:latest 840532010037.dkr.ecr.us-west-2.amazonaws.com/sonarqube:latest      
  post_build:
    commands:
      - echo Build completed on `date`
      - echo Pushing the Docker image...
      - docker push 840532010037.dkr.ecr.us-west-2.amazonaws.com/sonarqube:latest
